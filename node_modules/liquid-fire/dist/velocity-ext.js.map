{"version":3,"file":"velocity-ext.js","sources":["../src/velocity-ext.js"],"sourcesContent":["/*\r\n  This makes it possible to animate outerHeight and outerWidth with\r\n  Velocity, which is much more convenient for our purposes. Submitted\r\n  to Velocity as PR #485.\r\n*/\r\n\r\nimport {\r\n  dependencySatisfies,\r\n  macroCondition,\r\n  importSync,\r\n} from '@embroider/macros';\r\n\r\nexport const Velocity = (() => {\r\n  if (macroCondition(dependencySatisfies('velocity-animate', '*'))) {\r\n    // For FastBoot, Velocity don't exist so we use a noop\r\n    if (typeof FastBoot !== 'undefined') {\r\n      return () => {};\r\n    }\r\n\r\n    return importSync('velocity-animate').default;\r\n  } else {\r\n    throw new Error(\r\n      `liquid-fire was unable to detect velocity-animate. Please add to your app.`,\r\n    );\r\n  }\r\n})();\r\n\r\nif (typeof FastBoot === 'undefined') {\r\n  const VCSS = Velocity.CSS;\r\n\r\n  const augmentDimension = function (name, element) {\r\n    const sides = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\r\n\r\n    if (\r\n      VCSS.getPropertyValue(element, 'boxSizing').toString().toLowerCase() ===\r\n      'border-box'\r\n    ) {\r\n      /* in box-sizing mode, the VCSS width / height accessors already give the outerWidth / outerHeight. */\r\n      return 0;\r\n    } else {\r\n      let augment = 0;\r\n      const fields = [\r\n        'padding' + sides[0],\r\n        'padding' + sides[1],\r\n        'border' + sides[0] + 'Width',\r\n        'border' + sides[1] + 'Width',\r\n      ];\r\n      for (let i = 0; i < fields.length; i++) {\r\n        const value = parseFloat(VCSS.getPropertyValue(element, fields[i]));\r\n        if (!isNaN(value)) {\r\n          augment += value;\r\n        }\r\n      }\r\n      return augment;\r\n    }\r\n  };\r\n\r\n  const outerDimension = function (name) {\r\n    return function (type, element, propertyValue) {\r\n      switch (type) {\r\n        case 'name':\r\n          return name;\r\n        case 'extract':\r\n          return parseFloat(propertyValue) + augmentDimension(name, element);\r\n        case 'inject':\r\n          return (\r\n            parseFloat(propertyValue) - augmentDimension(name, element) + 'px'\r\n          );\r\n      }\r\n    };\r\n  };\r\n\r\n  VCSS.Normalizations.registered.outerWidth = outerDimension('width');\r\n  VCSS.Normalizations.registered.outerHeight = outerDimension('height');\r\n}\r\n"],"names":["Velocity","macroCondition","dependencySatisfies","FastBoot","importSync","default","Error","VCSS","CSS","augmentDimension","name","element","sides","getPropertyValue","toString","toLowerCase","augment","fields","i","length","value","parseFloat","isNaN","outerDimension","type","propertyValue","Normalizations","registered","outerWidth","outerHeight"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;;AAQaA,MAAAA,QAAQ,GAAG,CAAC,MAAM;EAC7B,IAAIC,cAAc,CAACC,mBAAmB,CAAC,kBAAkB,EAAE,GAAG,CAAC,CAAC,EAAE;AAChE;AACA,IAAA,IAAI,OAAOC,QAAQ,KAAK,WAAW,EAAE;MACnC,OAAO,MAAM,EAAE,CAAA;AACjB,KAAA;AAEA,IAAA,OAAOC,UAAU,CAAC,kBAAkB,CAAC,CAACC,OAAO,CAAA;AAC/C,GAAC,MAAM;AACL,IAAA,MAAM,IAAIC,KAAK,CACZ,CAAA,0EAAA,CACH,CAAC,CAAA;AACH,GAAA;AACF,CAAC,IAAG;AAEJ,IAAI,OAAOH,QAAQ,KAAK,WAAW,EAAE;AACnC,EAAA,MAAMI,IAAI,GAAGP,QAAQ,CAACQ,GAAG,CAAA;AAEzB,EAAA,MAAMC,gBAAgB,GAAG,UAAUC,IAAI,EAAEC,OAAO,EAAE;AAChD,IAAA,MAAMC,KAAK,GAAGF,IAAI,KAAK,OAAO,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;AAEtE,IAAA,IACEH,IAAI,CAACM,gBAAgB,CAACF,OAAO,EAAE,WAAW,CAAC,CAACG,QAAQ,EAAE,CAACC,WAAW,EAAE,KACpE,YAAY,EACZ;AACA;AACA,MAAA,OAAO,CAAC,CAAA;AACV,KAAC,MAAM;MACL,IAAIC,OAAO,GAAG,CAAC,CAAA;AACf,MAAA,MAAMC,MAAM,GAAG,CACb,SAAS,GAAGL,KAAK,CAAC,CAAC,CAAC,EACpB,SAAS,GAAGA,KAAK,CAAC,CAAC,CAAC,EACpB,QAAQ,GAAGA,KAAK,CAAC,CAAC,CAAC,GAAG,OAAO,EAC7B,QAAQ,GAAGA,KAAK,CAAC,CAAC,CAAC,GAAG,OAAO,CAC9B,CAAA;AACD,MAAA,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;AACtC,QAAA,MAAME,KAAK,GAAGC,UAAU,CAACd,IAAI,CAACM,gBAAgB,CAACF,OAAO,EAAEM,MAAM,CAACC,CAAC,CAAC,CAAC,CAAC,CAAA;AACnE,QAAA,IAAI,CAACI,KAAK,CAACF,KAAK,CAAC,EAAE;AACjBJ,UAAAA,OAAO,IAAII,KAAK,CAAA;AAClB,SAAA;AACF,OAAA;AACA,MAAA,OAAOJ,OAAO,CAAA;AAChB,KAAA;GACD,CAAA;AAED,EAAA,MAAMO,cAAc,GAAG,UAAUb,IAAI,EAAE;AACrC,IAAA,OAAO,UAAUc,IAAI,EAAEb,OAAO,EAAEc,aAAa,EAAE;AAC7C,MAAA,QAAQD,IAAI;AACV,QAAA,KAAK,MAAM;AACT,UAAA,OAAOd,IAAI,CAAA;AACb,QAAA,KAAK,SAAS;UACZ,OAAOW,UAAU,CAACI,aAAa,CAAC,GAAGhB,gBAAgB,CAACC,IAAI,EAAEC,OAAO,CAAC,CAAA;AACpE,QAAA,KAAK,QAAQ;AACX,UAAA,OACEU,UAAU,CAACI,aAAa,CAAC,GAAGhB,gBAAgB,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAG,IAAI,CAAA;AAExE,OAAA;KACD,CAAA;GACF,CAAA;EAEDJ,IAAI,CAACmB,cAAc,CAACC,UAAU,CAACC,UAAU,GAAGL,cAAc,CAAC,OAAO,CAAC,CAAA;EACnEhB,IAAI,CAACmB,cAAc,CAACC,UAAU,CAACE,WAAW,GAAGN,cAAc,CAAC,QAAQ,CAAC,CAAA;AACvE;;;;"}