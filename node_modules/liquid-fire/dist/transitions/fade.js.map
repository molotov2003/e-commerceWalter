{"version":3,"file":"fade.js","sources":["../../src/transitions/fade.js"],"sourcesContent":["// BEGIN-SNIPPET fade-definition\r\nimport { isAnimating, finish, timeSpent, animate, stop } from '../index';\r\n\r\nexport default function fade(opts = {}) {\r\n  let firstStep;\r\n  let outOpts = opts;\r\n  const fadingElement = findFadingElement(this);\r\n\r\n  if (fadingElement) {\r\n    // We still have some older version that is in the process of\r\n    // fading out, so out first step is waiting for it to finish.\r\n    firstStep = finish(fadingElement, 'fade-out');\r\n  } else {\r\n    if (isAnimating(this.oldElement, 'fade-in')) {\r\n      // if the previous view is partially faded in, scale its\r\n      // fade-out duration appropriately.\r\n      outOpts = { duration: timeSpent(this.oldElement, 'fade-in') };\r\n    }\r\n    stop(this.oldElement);\r\n    firstStep = animate(this.oldElement, { opacity: 0 }, outOpts, 'fade-out');\r\n  }\r\n  return firstStep.then(() => {\r\n    return animate(\r\n      this.newElement,\r\n      { opacity: [opts.maxOpacity || 1, 0] },\r\n      opts,\r\n      'fade-in',\r\n    );\r\n  });\r\n}\r\n\r\nfunction findFadingElement(context) {\r\n  for (let i = 0; i < context.older.length; i++) {\r\n    const entry = context.older[i];\r\n    if (isAnimating(entry.element, 'fade-out')) {\r\n      return entry.element;\r\n    }\r\n  }\r\n  if (isAnimating(context.oldElement, 'fade-out')) {\r\n    return context.oldElement;\r\n  }\r\n}\r\n// END-SNIPPET\r\n"],"names":["fade","opts","firstStep","outOpts","fadingElement","findFadingElement","finish","isAnimating","oldElement","duration","timeSpent","stop","animate","opacity","then","newElement","maxOpacity","context","i","older","length","entry","element"],"mappings":";;;;;;;;;;;;AAAA;AAGe,SAASA,IAAIA,CAACC,IAAI,GAAG,EAAE,EAAE;AACtC,EAAA,IAAIC,SAAS,CAAA;EACb,IAAIC,OAAO,GAAGF,IAAI,CAAA;AAClB,EAAA,MAAMG,aAAa,GAAGC,iBAAiB,CAAC,IAAI,CAAC,CAAA;AAE7C,EAAA,IAAID,aAAa,EAAE;AACjB;AACA;AACAF,IAAAA,SAAS,GAAGI,MAAM,CAACF,aAAa,EAAE,UAAU,CAAC,CAAA;AAC/C,GAAC,MAAM;IACL,IAAIG,WAAW,CAAC,IAAI,CAACC,UAAU,EAAE,SAAS,CAAC,EAAE;AAC3C;AACA;AACAL,MAAAA,OAAO,GAAG;AAAEM,QAAAA,QAAQ,EAAEC,SAAS,CAAC,IAAI,CAACF,UAAU,EAAE,SAAS,CAAA;OAAG,CAAA;AAC/D,KAAA;AACAG,IAAAA,IAAI,CAAC,IAAI,CAACH,UAAU,CAAC,CAAA;AACrBN,IAAAA,SAAS,GAAGU,OAAO,CAAC,IAAI,CAACJ,UAAU,EAAE;AAAEK,MAAAA,OAAO,EAAE,CAAA;AAAE,KAAC,EAAEV,OAAO,EAAE,UAAU,CAAC,CAAA;AAC3E,GAAA;AACA,EAAA,OAAOD,SAAS,CAACY,IAAI,CAAC,MAAM;AAC1B,IAAA,OAAOF,OAAO,CACZ,IAAI,CAACG,UAAU,EACf;MAAEF,OAAO,EAAE,CAACZ,IAAI,CAACe,UAAU,IAAI,CAAC,EAAE,CAAC,CAAA;AAAE,KAAC,EACtCf,IAAI,EACJ,SACF,CAAC,CAAA;AACH,GAAC,CAAC,CAAA;AACJ,CAAA;AAEA,SAASI,iBAAiBA,CAACY,OAAO,EAAE;AAClC,EAAA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,OAAO,CAACE,KAAK,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;AAC7C,IAAA,MAAMG,KAAK,GAAGJ,OAAO,CAACE,KAAK,CAACD,CAAC,CAAC,CAAA;IAC9B,IAAIX,WAAW,CAACc,KAAK,CAACC,OAAO,EAAE,UAAU,CAAC,EAAE;MAC1C,OAAOD,KAAK,CAACC,OAAO,CAAA;AACtB,KAAA;AACF,GAAA;EACA,IAAIf,WAAW,CAACU,OAAO,CAACT,UAAU,EAAE,UAAU,CAAC,EAAE;IAC/C,OAAOS,OAAO,CAACT,UAAU,CAAA;AAC3B,GAAA;AACF,CAAA;AACA;;;;"}