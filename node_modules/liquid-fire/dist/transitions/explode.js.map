{"version":3,"file":"explode.js","sources":["../../src/transitions/explode.js"],"sourcesContent":["import { isArray, A } from '@ember/array';\r\nimport { guidFor } from '@ember/object/internals';\r\nimport { Promise } from '../index';\r\n\r\n// Explode is not, by itself, an animation. It exists to pull apart\r\n// other elements so that each of the pieces can be targeted by\r\n// animations.\r\n\r\nconst deduplicateChildElementIds = (parentElem) => {\r\n  if (!parentElem) {\r\n    return;\r\n  }\r\n\r\n  const parentEl = parentElem;\r\n  if (parentEl.id) {\r\n    parentEl.setAttribute('id', `${guidFor(parentEl)}-${parentEl.id}`);\r\n  }\r\n\r\n  const childrenWithUniqueIds = parentEl.querySelectorAll('[id]');\r\n  if (childrenWithUniqueIds.length) {\r\n    for (const el of childrenWithUniqueIds) {\r\n      el.setAttribute('id', `${guidFor(el)}-${el.id}`);\r\n    }\r\n  }\r\n};\r\n\r\nexport default function explode(...pieces) {\r\n  const seenElements = {};\r\n  let sawBackgroundPiece = false;\r\n  const promises = pieces.map((piece) => {\r\n    if (piece.matchBy) {\r\n      return matchAndExplode(this, piece, seenElements);\r\n    } else if (piece.pick || piece.pickOld || piece.pickNew) {\r\n      return explodePiece(this, piece, seenElements);\r\n    } else {\r\n      sawBackgroundPiece = true;\r\n      return runAnimation(this, piece);\r\n    }\r\n  });\r\n  if (!sawBackgroundPiece) {\r\n    if (this.newElement) {\r\n      this.newElement.style.visibility = '';\r\n    }\r\n    if (this.oldElement) {\r\n      this.oldElement.style.visibility = 'hidden';\r\n    }\r\n  }\r\n  return Promise.all(promises);\r\n}\r\n\r\nfunction explodePiece(context, piece, seen) {\r\n  const childContext = { ...context };\r\n  const selectors = [piece.pickOld || piece.pick, piece.pickNew || piece.pick];\r\n  let cleanupOld, cleanupNew;\r\n\r\n  if (selectors[0] || selectors[1]) {\r\n    cleanupOld = _explodePart(\r\n      context,\r\n      'oldElement',\r\n      childContext,\r\n      selectors[0],\r\n      seen,\r\n    );\r\n    cleanupNew = _explodePart(\r\n      context,\r\n      'newElement',\r\n      childContext,\r\n      selectors[1],\r\n      seen,\r\n    );\r\n    if (!cleanupOld && !cleanupNew) {\r\n      return Promise.resolve();\r\n    }\r\n  }\r\n\r\n  return runAnimation(childContext, piece).finally(() => {\r\n    if (cleanupOld) {\r\n      cleanupOld();\r\n    }\r\n    if (cleanupNew) {\r\n      cleanupNew();\r\n    }\r\n  });\r\n}\r\n\r\nfunction _explodePart(context, field, childContext, selector, seen) {\r\n  let child, childOffset, width, height, newChild;\r\n  const elt = context[field];\r\n\r\n  childContext[field] = null;\r\n  if (elt && selector) {\r\n    child = [...elt.querySelectorAll(selector)].filter(function (elm) {\r\n      const guid = guidFor(elm);\r\n      if (!seen[guid]) {\r\n        seen[guid] = true;\r\n        return true;\r\n      }\r\n    });\r\n    if (child.length > 0) {\r\n      child = child[0];\r\n\r\n      childOffset = getOffset(child);\r\n\r\n      width = child.offsetWidth;\r\n      height = child.offsetHeight;\r\n      newChild = child.cloneNode(true);\r\n\r\n      deduplicateChildElementIds(newChild);\r\n\r\n      // Hide the original element\r\n      child.style.visibility = 'hidden';\r\n\r\n      // If the original element's parent was hidden, hide our clone\r\n      // too.\r\n      if (elt.style.visibility === 'hidden') {\r\n        newChild.style.visibility = 'hidden';\r\n      }\r\n      elt.parentElement.append(newChild);\r\n      newChild.style.width = `${width}px`;\r\n      newChild.style.height = `${height}px`;\r\n      const newParentOffset = getOffset(newChild.offsetParent);\r\n\r\n      css(newChild, {\r\n        position: 'absolute',\r\n        top: childOffset.top - newParentOffset.top + 'px',\r\n        left: childOffset.left - newParentOffset.left + 'px',\r\n        margin: 0,\r\n      });\r\n\r\n      // Pass the clone to the next animation\r\n      childContext[field] = newChild;\r\n\r\n      return function cleanup() {\r\n        newChild.remove();\r\n        child.style.visibility = '';\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nfunction getOffset(ele) {\r\n  const rect = ele?.getBoundingClientRect() ?? { top: 0, left: 0 };\r\n  return {\r\n    top: rect.top + window.scrollY,\r\n    left: rect.left + window.scrollX,\r\n  };\r\n}\r\n\r\nfunction css(element, styles) {\r\n  for (const property in styles) element.style[property] = styles[property];\r\n}\r\n\r\nfunction animationFor(context, piece) {\r\n  let name, args, func;\r\n  if (!piece.use) {\r\n    throw new Error(\r\n      \"every argument to the 'explode' animation must include a followup animation to 'use'\",\r\n    );\r\n  }\r\n  if (isArray(piece.use)) {\r\n    name = piece.use[0];\r\n    args = piece.use.slice(1);\r\n  } else {\r\n    name = piece.use;\r\n    args = [];\r\n  }\r\n  if (typeof name === 'function') {\r\n    func = name;\r\n  } else {\r\n    func = context.lookup(name);\r\n  }\r\n  return function () {\r\n    return Promise.resolve(func.apply(this, args));\r\n  };\r\n}\r\n\r\nfunction runAnimation(context, piece) {\r\n  return new Promise((resolve, reject) => {\r\n    animationFor(context, piece).apply(context).then(resolve, reject);\r\n  });\r\n}\r\n\r\nfunction matchAndExplode(context, piece, seen) {\r\n  if (!context.oldElement || !context.newElement) {\r\n    return Promise.resolve();\r\n  }\r\n\r\n  // reduce the matchBy scope\r\n  if (piece.pick) {\r\n    context.oldElement = context.oldElement.querySelector(piece.pick);\r\n    context.newElement = context.newElement.querySelector(piece.pick);\r\n  }\r\n\r\n  if (piece.pickOld) {\r\n    context.oldElement = context.oldElement.querySelector(piece.pickOld);\r\n  }\r\n\r\n  if (piece.pickNew) {\r\n    context.newElement = context.newElement.querySelector(piece.pickNew);\r\n  }\r\n\r\n  // use the fastest selector available\r\n  let selector;\r\n\r\n  if (piece.matchBy === 'id') {\r\n    selector = (attrValue) => {\r\n      return `#${attrValue}`;\r\n    };\r\n  } else if (piece.matchBy === 'class') {\r\n    selector = (attrValue) => {\r\n      return `.${attrValue}`;\r\n    };\r\n  } else {\r\n    selector = (attrValue) => {\r\n      const escapedAttrValue = attrValue.replace(/'/g, \"\\\\'\");\r\n      return `[${piece.matchBy}='${escapedAttrValue}']`;\r\n    };\r\n  }\r\n\r\n  const hits = A([\r\n    ...context.oldElement.querySelectorAll(`[${piece.matchBy}]`),\r\n  ]);\r\n  return Promise.all(\r\n    hits.map((elt) => {\r\n      const attrValue = elt.getAttribute(piece.matchBy);\r\n\r\n      // if there is no match for a particular item just skip it\r\n      if (\r\n        attrValue === '' ||\r\n        context.newElement.querySelectorAll(selector(attrValue)).length === 0\r\n      ) {\r\n        return Promise.resolve();\r\n      }\r\n\r\n      return explodePiece(\r\n        context,\r\n        {\r\n          pick: selector(attrValue),\r\n          use: piece.use,\r\n        },\r\n        seen,\r\n      );\r\n    }),\r\n  );\r\n}\r\n"],"names":["deduplicateChildElementIds","parentElem","parentEl","id","setAttribute","guidFor","childrenWithUniqueIds","querySelectorAll","length","el","explode","pieces","seenElements","sawBackgroundPiece","promises","map","piece","matchBy","matchAndExplode","pick","pickOld","pickNew","explodePiece","runAnimation","newElement","style","visibility","oldElement","Promise","all","context","seen","childContext","selectors","cleanupOld","cleanupNew","_explodePart","resolve","finally","field","selector","child","childOffset","width","height","newChild","elt","filter","elm","guid","getOffset","offsetWidth","offsetHeight","cloneNode","parentElement","append","newParentOffset","offsetParent","css","position","top","left","margin","cleanup","remove","ele","rect","getBoundingClientRect","window","scrollY","scrollX","element","styles","property","animationFor","name","args","func","use","Error","isArray","slice","lookup","apply","reject","then","querySelector","attrValue","escapedAttrValue","replace","hits","A","getAttribute"],"mappings":"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"}