{"version":3,"file":"liquid-spacer.js","sources":["../../src/components/liquid-spacer.hbs.js","../../src/components/liquid-spacer.js"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"<div class={{@class}}\\r\\n  ...attributes\\r\\n  {{did-insert this.setup}}\\r\\n>\\r\\n  <LiquidMeasured @didMeasure={{this.sizeChanged}}>\\r\\n    {{yield}}\\r\\n  </LiquidMeasured>\\r\\n</div>\")","import Component from '@glimmer/component';\r\nimport { action } from '@ember/object';\r\nimport { inject as service } from '@ember/service';\r\nimport { animateGrowth, measure } from '../utils/animate';\r\n\r\nexport default class LiquidOutletComponent extends Component {\r\n  @service('liquid-fire-transitions') transitionMap;\r\n\r\n  element = null;\r\n\r\n  get enabled() {\r\n    return this.args.enabled || true;\r\n  }\r\n\r\n  get growDuration() {\r\n    return this.args.growDuration || 250;\r\n  }\r\n\r\n  get growPixelsPerSecond() {\r\n    return this.args.growPixelsPerSecond || 200;\r\n  }\r\n\r\n  get growEasing() {\r\n    return this.args.growEasing || 'slide';\r\n  }\r\n\r\n  get shrinkDelay() {\r\n    return this.args.shrinkDelay || 0;\r\n  }\r\n\r\n  get growDelay() {\r\n    return this.args.growDelay || 0;\r\n  }\r\n\r\n  get growWidth() {\r\n    return this.args.growWidth !== undefined ? this.args.growWidth : true;\r\n  }\r\n\r\n  get growHeight() {\r\n    return this.args.growHeight !== undefined ? this.args.growHeight : true;\r\n  }\r\n\r\n  @action\r\n  setup(element) {\r\n    this.element = element;\r\n\r\n    const elt = element;\r\n    const child = elt.getElementsByTagName('div')[0];\r\n    const measurements = this.myMeasurements(measure(child));\r\n\r\n    element.style.overflow = 'hidden';\r\n\r\n    if (this.growWidth) {\r\n      elt.style.width = `${measurements.width}px`;\r\n    }\r\n    if (this.growHeight) {\r\n      elt.style.height = `${measurements.height}px`;\r\n    }\r\n  }\r\n\r\n  @action\r\n  sizeChanged(measurements) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n    if (!this.element) {\r\n      return;\r\n    }\r\n    const want = this.myMeasurements(measurements);\r\n    const elt = this.element;\r\n    const have = measure(elt);\r\n    this.animateGrowth(elt, have, want);\r\n  }\r\n\r\n  animateGrowth(elt, have, want) {\r\n    return animateGrowth(\r\n      elt,\r\n      have,\r\n      want,\r\n      this.transitionMap,\r\n      this.growWidth,\r\n      this.growHeight,\r\n      this.growEasing,\r\n      this.shrinkDelay,\r\n      this.growDelay,\r\n      this.growDuration,\r\n      this.growPixelsPerSecond,\r\n    );\r\n  }\r\n\r\n  // given our child's outerWidth & outerHeight, figure out what our\r\n  // outerWidth & outerHeight should be.\r\n  myMeasurements(childMeasurements) {\r\n    const elt = this.element;\r\n    return {\r\n      width:\r\n        childMeasurements.width +\r\n        sumCSS(elt, padding('width')) +\r\n        sumCSS(elt, border('width')),\r\n      height:\r\n        childMeasurements.height +\r\n        sumCSS(elt, padding('height')) +\r\n        sumCSS(elt, border('height')),\r\n    };\r\n  }\r\n}\r\n\r\nfunction sides(dimension) {\r\n  return dimension === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\r\n}\r\n\r\nfunction padding(dimension) {\r\n  const s = sides(dimension);\r\n  return ['padding' + s[0], 'padding' + s[1]];\r\n}\r\n\r\nfunction border(dimension) {\r\n  const s = sides(dimension);\r\n  return ['border' + s[0] + 'Width', 'border' + s[1] + 'Width'];\r\n}\r\n\r\nfunction sumCSS(elt, fields) {\r\n  let accum = 0;\r\n  const style = getComputedStyle(elt);\r\n\r\n  for (let i = 0; i < fields.length; i++) {\r\n    const num = parseFloat(style[fields[i]], 10);\r\n    if (!isNaN(num)) {\r\n      accum += num;\r\n    }\r\n  }\r\n  return accum;\r\n}\r\n"],"names":["precompileTemplate","LiquidOutletComponent","_dec","service","_class","Component","constructor","args","_initializerDefineProperty","_descriptor","_defineProperty","enabled","growDuration","growPixelsPerSecond","growEasing","shrinkDelay","growDelay","growWidth","undefined","growHeight","setup","element","elt","child","getElementsByTagName","measurements","myMeasurements","measure","style","overflow","width","height","sizeChanged","want","have","animateGrowth","transitionMap","childMeasurements","sumCSS","padding","border","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer","action","Object","getOwnPropertyDescriptor","sides","dimension","s","fields","accum","getComputedStyle","i","length","num","parseFloat","isNaN","setComponentTemplate","TEMPLATE"],"mappings":"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"}